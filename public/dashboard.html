<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Dashboard Admin</title>
  <script src="firebase.js" type="module"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-950 text-white p-4">
  <h1 class="text-2xl mb-4">ðŸ“» Admin Dashboard</h1>
  <ul id="reqList" class="space-y-2"></ul>

  <script type="module">
    const db = window.firebaseDB;
    const ref = window.firebaseRef(db, 'requests/');
    const nowPlayingRef = window.firebaseRef(db, 'nowPlaying');

    window.firebaseOn(ref, snapshot => {
      const list = document.getElementById('reqList');
      list.innerHTML = '';
      snapshot.forEach(child => {
        const song = child.val();
        const li = document.createElement('li');
        li.innerHTML = `
          <div class="p-2 border rounded">
            <strong>${song.title}</strong> - ${song.artist}
            <button class="bg-red-500 px-2 py-1 ml-2" onclick='playSong("${song.title}", "${song.artist}")'>Putar</button>
          </div>
        `;
        list.appendChild(li);
      });
    });

    window.playSong = (title, artist) => {
      window.firebaseSet(nowPlayingRef, { title, artist, time: Date.now() });
      alert(`Memutar ${title} oleh ${artist}`);
    };
  </script>
</body>
</html>
